<script src="https://code.jquery.com/jquery-3.7.0.js"></script>
<link rel="stylesheet" href="style.css" />

<div id="bg" style="display: flex">
  <h1 id="title" class="chooseGame">選擇主題</h1>
  <div id="game" style="height: 100%; width: 100%; container-type: size"></div>
  <button id="backBtn" onclick="setGame(0)">返回</button>
  <!-- <img src="./logo1.png" style="height: 801; width: 130" /> -->
</div>

<script>
  const bgStyle = document.getElementById("bg").style;
  const titleText = document.getElementById("title");
  const backBtn = document.getElementById("backBtn");
  const game = document.getElementById("game");
  let gameData = $.getJSON("./gameData.json");

  function setGame(gameIndex) {
    titleText.innerHTML = gameData.titles[gameIndex];
    bgStyle.filter = "hue-rotate(" + Math.round((gameIndex / 7) * 360) + "deg)";
    backBtn.style = "";

    if (localStorage.getItem("interval")) {
      clearInterval(localStorage.getItem("interval"));
      localStorage.removeItem("interval");
    }

    switch (gameIndex) {
      case 1:
        $("#game").load("components/puzzle.html");
        titleText.className = "inGame";
        break;
      case 2:
        $("#game").load("components/rhymes.html");
        titleText.className = "inGame";
        break;
      case 3:
      case 4:
      case 5:
      case 6:
        $("#game").load("components/puzzle.html");
        titleText.className = "inGame";
        break;

      default:
        backBtn.style = "display: none";
        $("#game").load("components/gameSelection.html");
        titleText.className = "chooseGame";
        break;
    }
  }

  async function init() {
    await $.getJSON("gameData.json", function (json) {
      gameData = json;
      console.log(gameData.titles[1]);
    });
    $("#game").load("components/gameSelection.html");
    setGame(2);
  }

  init();
</script>
