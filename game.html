<script src="https://code.jquery.com/jquery-3.7.0.js"></script>
<link rel="stylesheet" href="style.css" />

<div id="bg" style="display: flex">
  <img
    class="logo"
    src="./assets/logo1.png"
    style="right: 4cqmin; max-width: 20%"
  />
  <img
    class="logo"
    src="./assets/logo2.png"
    style="left: 4cqmin; max-width: 50%"
  />
  <h1 id="title" class="chooseGame">選擇主題</h1>
  <div id="game" style="height: 100%; width: 100%; container-type: size"></div>
  <button id="backBtn" onclick="setGame(0)">返回</button>
</div>

<script>
  const bgStyle = document.getElementById("bg").style;
  const titleText = document.getElementById("title");
  const backBtn = document.getElementById("backBtn");
  const game = document.getElementById("game");
  const logos = document.getElementsByClassName("logo");

  let gameData = $.getJSON("./gameData.json");

  function clearBg() {
    for (let i = 0; i < logos.length; i++) {
      logos[i].style.display = "none";
    }
    delete i;
    titleText.className = "inGame";
  }
  function setGame(gameIndex) {
    titleText.innerHTML = gameData.titles[gameIndex];
    bgStyle.filter = "hue-rotate(" + Math.round((gameIndex / 7) * 360) + "deg)";
    backBtn.style = "";

    if (localStorage.getItem("interval")) {
      clearInterval(localStorage.getItem("interval"));
      localStorage.removeItem("interval");
    }

    switch (gameIndex) {
      case 1:
        $("#game").load("./puzzle.html");
        clearBg();
        break;
      case 2:
        $("#game").load("./rhymes.html");
        clearBg();
        break;
      case 3:
        $("#game").load("./connect.html");
        clearBg();
        break;
      case 4:
        $("#game").load("./matching.html");
        clearBg();
        break;
      case 5:
        $("#game").load("./pair.html");
        clearBg();
        break;
      case 6:
        $("#game").load("./ticTacToe.html");
        clearBg();
        break;

      default:
        backBtn.style = "display: none";
        $("#game").load("./gameSelection.html");
        titleText.className = "chooseGame";
        for (let i = 0; i < logos.length; i++) {
          logos[i].style.display = "block";
        }
        delete i;
        break;
    }
  }

  async function init() {
    await $.getJSON("gameData.json", function (json) {
      gameData = json;
    });
    $("#game").load("./gameSelection.html");
    setGame(0);
  }

  init();
</script>
